<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<title>集中实习 推荐算法 我的工作 - Iron Age</title>
<meta name=renderer content="webkit">
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1">
<meta http-equiv=cache-control content="no-transform">
<meta http-equiv=cache-control content="no-siteapp">
<meta name=theme-color content="#f8f5ec">
<meta name=msapplication-navbutton-color content="#f8f5ec">
<meta name=apple-mobile-web-app-capable content="yes">
<meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec">
<meta name=author content="magictomagic"><meta name=description content="数据处理 进一步清洗 确保除去部分空白符，规整，去重，重命名爬取的数据。 合并 将相同书名和作者但标签不同的书籍合并，多一个含 30 维标签的向量。 敏捷开"><meta name=keywords content="Hugo,theme,even">
<meta name=generator content="Hugo 0.88.1 with theme even">
<link rel=canonical href=https://iron.magictomagic.com/post/%E9%9B%86%E4%B8%AD%E5%AE%9E%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%AE%97%E6%B3%95/>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png>
<link rel=manifest href=/manifest.json>
<link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5>
<link href=/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css rel=stylesheet>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous>
<meta property="og:title" content="集中实习 推荐算法 我的工作">
<meta property="og:description" content="数据处理 进一步清洗 确保除去部分空白符，规整，去重，重命名爬取的数据。 合并 将相同书名和作者但标签不同的书籍合并，多一个含 30 维标签的向量。 敏捷开">
<meta property="og:type" content="article">
<meta property="og:url" content="https://iron.magictomagic.com/post/%E9%9B%86%E4%B8%AD%E5%AE%9E%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%AE%97%E6%B3%95/"><meta property="article:section" content="post">
<meta property="article:published_time" content="2020-07-22T01:37:56+08:00">
<meta property="article:modified_time" content="2020-07-22T01:37:56+08:00">
<meta itemprop=name content="集中实习 推荐算法 我的工作">
<meta itemprop=description content="数据处理 进一步清洗 确保除去部分空白符，规整，去重，重命名爬取的数据。 合并 将相同书名和作者但标签不同的书籍合并，多一个含 30 维标签的向量。 敏捷开"><meta itemprop=datePublished content="2020-07-22T01:37:56+08:00">
<meta itemprop=dateModified content="2020-07-22T01:37:56+08:00">
<meta itemprop=wordCount content="961">
<meta itemprop=keywords content="experiment,协同过滤算法,实习,"><meta name=twitter:card content="summary">
<meta name=twitter:title content="集中实习 推荐算法 我的工作">
<meta name=twitter:description content="数据处理 进一步清洗 确保除去部分空白符，规整，去重，重命名爬取的数据。 合并 将相同书名和作者但标签不同的书籍合并，多一个含 30 维标签的向量。 敏捷开"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]-->
</head>
<body>
<div id=mobile-navbar class=mobile-navbar>
<div class=mobile-header-logo>
<a href=/ class=logo>Iron</a>
</div>
<div class=mobile-navbar-icon>
<span></span>
<span></span>
<span></span>
</div>
</div>
<nav id=mobile-menu class="mobile-menu slideout-menu">
<ul class=mobile-menu-list>
<a href=/>
<li class=mobile-menu-item>Home</li>
</a><a href=/post/>
<li class=mobile-menu-item>Archives</li>
</a><a href=/tags/>
<li class=mobile-menu-item>Tags</li>
</a><a href=/categories/>
<li class=mobile-menu-item>Categories</li>
</a>
</ul>
</nav>
<div class=container id=mobile-panel>
<header id=header class=header>
<div class=logo-wrapper>
<a href=/ class=logo>Iron</a>
</div>
<nav class=site-navbar>
<ul id=menu class=menu>
<li class=menu-item>
<a class=menu-item-link href=/>Home</a>
</li><li class=menu-item>
<a class=menu-item-link href=/post/>Archives</a>
</li><li class=menu-item>
<a class=menu-item-link href=/tags/>Tags</a>
</li><li class=menu-item>
<a class=menu-item-link href=/categories/>Categories</a>
</li>
</ul>
</nav>
</header>
<main id=main class=main>
<div class=content-wrapper>
<div id=content class=content>
<article class=post>
<header class=post-header>
<h1 class=post-title>集中实习 推荐算法 我的工作</h1>
<div class=post-meta>
<span class=post-time> 2020-07-22 </span>
<div class=post-category>
<a href=/categories/exp/> exp </a>
</div>
</div>
</header>
<div class=post-toc id=post-toc>
<h2 class=post-toc-title>Contents</h2>
<div class="post-toc-content always-active">
<nav id=TableOfContents>
<ul>
<li>
<ul>
<li><a href=#数据处理>数据处理</a>
<ul>
<li><a href=#进一步清洗1><a href=/files/internship_with_cc/deleteBlankSpace.py>进一步清洗</a></a></li>
<li><a href=#合并2><a href=/files/internship_with_cc/merge_all_data.py>合并</a></a></li>
</ul>
</li>
<li><a href=#敏捷开发协同过滤算法>敏捷开发协同过滤算法</a>
<ul>
<li><a href=#v1-随机推送4>V1: <a href=/files/internship_with_cc/recomAlg_v1.py>随机推送</a></a></li>
<li><a href=#v3-基于书名推送3>V3: <a href=/files/internship_with_cc/recomAlg_v3.py>基于书名推送</a></a></li>
<li><a href=#v4-基于-id-推送5>V4: <a href=/files/internship_with_cc/recomAlg_v4_2.py>基于 id 推送</a></a></li>
<li><a href=#v5-使用-numpy-优化速度6>V5: <a href=/files/internship_with_cc/recom_alg_v5_2.py>使用 numpy 优化速度</a></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</div>
</div>
<div class=post-content>
<h2 id=数据处理>数据处理</h2>
<h3 id=进一步清洗1><a href=/files/internship_with_cc/deleteBlankSpace.py>进一步清洗</a></h3>
<p>确保除去部分空白符，规整，去重，重命名爬取的数据。</p>
<p><img src=/img/Snipaste_2020-07-22_16-15-56.png alt> <img src=/img/Snipaste_2020-07-22_16-16-10.png alt></p>
<h3 id=合并2><a href=/files/internship_with_cc/merge_all_data.py>合并</a></h3>
<p>将相同书名和作者但标签不同的书籍合并，多一个含 30 维标签的向量。</p>
<p><img src=/img/Snipaste_2020-07-22_16-23-56.png alt>
<img src=/img/Snipaste_2020-07-22_16-22-56.png alt></p>
<h2 id=敏捷开发协同过滤算法>敏捷开发协同过滤算法</h2>
<h3 id=v1-随机推送4>V1: <a href=/files/internship_with_cc/recomAlg_v1.py>随机推送</a></h3>
<h3 id=v3-基于书名推送3>V3: <a href=/files/internship_with_cc/recomAlg_v3.py>基于书名推送</a></h3>
<h3 id=v4-基于-id-推送5>V4: <a href=/files/internship_with_cc/recomAlg_v4_2.py>基于 id 推送</a></h3>
<h3 id=v5-使用-numpy-优化速度6>V5: <a href=/files/internship_with_cc/recom_alg_v5_2.py>使用 numpy 优化速度</a></h3>
<h5 id=实现过程>实现过程</h5>
<ul>
<li>
<p>算法选择</p>
<p>和某组员讨论使用什么算法，开始我只关注数据层面的，没有关注算法，在设计好了数据后，看了一眼算法，发现这是基于用户的协同过滤算法，可是我们没有初始的用户数据，但这个组员执意用基于用户的协同过滤算法。。。可能是这个代码是他网上找的，然后看也不看直接复制粘贴到 IDE 上，费了好大力气看懂，然后在我和老师的帮助下调通，然后觉得基于用户的协同过滤算法伟光正，不用这个算法就犯了路线错误，不能不用吧。总之，这种操作的起到的效果是：</p>
<p>​ 1.选择的基于用户的协调过滤算法与我们组开始提出的需求极度不匹配，与前后端沟通失败。</p>
<p>​ 2.浪费了 lz 两天时间，导致 lz 心情变差。</p>
<p>​ 3.确立了自己写基于物品的协调过滤算法的方针。</p>
</li>
<li>
<p>敏捷开发</p>
<ul>
<li><a href=#v1-%E9%9A%8F%E6%9C%BA%E6%8E%A8%E9%80%81>V1</a></li>
</ul>
<p>由于刚开始道路不够自信，所以我先实现一个简单的，就是<a href=#v1-%E9%9A%8F%E6%9C%BA%E6%8E%A8%E9%80%81>V1</a>版本，老师的评价是，如果这样，分数不会高，但称赞我掌握了敏捷开发的真谛。<a href=#v1-%E9%9A%8F%E6%9C%BA%E6%8E%A8%E9%80%81>V1</a>花了一上午时间，和前后端初步确立了 interface，加上被老师夸了，道路也更加自信了。</p>
<ul>
<li><a href=#v3-%E5%9F%BA%E4%BA%8E%E4%B9%A6%E5%90%8D%E6%8E%A8%E9%80%81>V3</a></li>
</ul>
<p>花了两天开发的差不多了后，和前后端进一步交流，确立了我返回的数据是一个书名的 List。</p>
<ul>
<li><a href=#v4-%E5%9F%BA%E4%BA%8E-id-%E6%8E%A8%E9%80%81>V4</a></li>
</ul>
<p>发现书籍会有重名，因为我一开始过滤是通过：书籍名 + 作者 洗与合并数据的，同一个书名的作者可能不同，比如《我的奋斗》，罗永浩也写了一本。所以把接口重新协商了。</p>
<ul>
<li><a href=#v5-%E4%BD%BF%E7%94%A8-numpy-%E4%BC%98%E5%8C%96%E9%80%9F%E5%BA%A6>V5</a></li>
</ul>
<p>之前的算法基本实现了图书推荐的功能，但主要存在两个不足。这个版本解决了之前的不足，如何解决放到<a href=#%E4%BA%AE%E7%82%B9>亮点</a>中了。不足点是：</p>
<ol>
<li>
<p>推荐的书籍会重复。</p>
</li>
<li>
<p>每次计算推荐给用户的书籍要花上半分钟。</p>
</li>
</ol>
</li>
</ul>
<p>​ 对应的原因是：</p>
<ol>
<li>用户向量会越来越接近他所选择书的平均，导致其它差别不怎么大的书没有机会被选到，之前选过的书会经常出现在用户眼前。</li>
<li>使用迭代器遍历 .csv 文件，是一种顺序的遍历，效率低。</li>
</ol>
<h5 id=核心思想>核心思想</h5>
<p>找了好久才偷到了这些图</p>
<p><img src="https://pic3.zhimg.com/v2-63243f2b35182cc73e7071f37866f1f0_1440w.jpg?source=172ae18b" alt></p>
<p><img src=https://upload-images.jianshu.io/upload_images/5687393-72da6987b833baf2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/775/format/webp alt></p>
<h5 id=亮点>亮点</h5>
<p>对照不足的原因，解决方案是：</p>
<ol>
<li>
<p>增加一个存储用户喜欢与不喜欢的书籍的数据库（这里用 .csv 文件存）</p>
</li>
<li>
<p>使用 numpy，把书籍的每个标签当作一个向量，把用户的 preference 复制成和书籍的 dimension 一样，然后直接计算余弦相似度。获得余弦相似度向量，后续处理基本相似。跑一次 1.5s 左右，速度大大提升。</p>
</li>
</ol>
</div>
<div class=post-copyright>
<p class=copyright-item>
<span class=item-title>Author</span>
<span class=item-content>magictomagic</span>
</p>
<p class=copyright-item>
<span class=item-title>LastMod</span>
<span class=item-content>
2020-07-22
</span>
</p>
<p class=copyright-item>
<span class=item-title>License</span>
<span class=item-content><a rel="license noopener" href=https://en.wikipedia.org/wiki/Wikipedia:Text_of_Creative_Commons_Attribution-ShareAlike_3.0_Unported_License target=_blank>Creative Commons Attribution-ShareAlike License</a></span>
</p>
</div>
<footer class=post-footer>
<div class=post-tags>
<a href=/tags/experiment/>experiment</a>
<a href=/tags/%E5%8D%8F%E5%90%8C%E8%BF%87%E6%BB%A4%E7%AE%97%E6%B3%95/>协同过滤算法</a>
<a href=/tags/%E5%AE%9E%E4%B9%A0/>实习</a>
</div>
<nav class=post-nav>
<a class=prev href=/post/redmi_k30pro-%E5%88%B7%E6%AC%A7%E6%B4%B2%E7%89%88/>
<i class="iconfont icon-left"></i>
<span class="prev-text nav-default">Redmi_K30Pro-刷欧洲版</span>
<span class="prev-text nav-mobile">Prev</span>
</a>
<a class=next href=/post/vmware-%E5%B1%80%E5%9F%9F%E7%BD%91%E4%B8%8B%E7%9A%84%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%B1%E4%BA%AB/>
<span class="next-text nav-default">局域网下共享VmWare虚拟机</span>
<span class="next-text nav-mobile">Next</span>
<i class="iconfont icon-right"></i>
</a>
</nav>
</footer>
</article>
</div>
</div>
</main>
<footer id=footer class=footer>
<div class=social-links>
<a href=1172765646@qq.com class="iconfont icon-email" title=email></a>
<a href=https://stackoverflow.com/users/13469560/huaiyu-huang class="iconfont icon-stack-overflow" title=stack-overflow></a>
<a href=https://twitter.com/magictomagic3 class="iconfont icon-twitter" title=twitter></a>
<a href=http://localhost:1313 class="iconfont icon-linkedin" title=linkedin></a>
<a href=https://github.com/magictomagic class="iconfont icon-github" title=github></a>
<a href=https://iron.magictomagic.com/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a>
</div>
<div class=copyright>
<span class=power-by>
Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a>
</span>
<span class=division>|</span>
<span class=theme-info>
Theme -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a>
</span>
<span class=copyright-year>
&copy;
2021<span class=heart><i class="iconfont icon-heart"></i></span><span>magictomagic</span>
</span>
</div>
</footer>
<div class=back-to-top id=back-to-top>
<i class="iconfont icon-up"></i>
</div>
</div>
<script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js></script>
</body>
</html>